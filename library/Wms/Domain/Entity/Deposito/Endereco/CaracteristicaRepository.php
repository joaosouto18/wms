<?php
namespace Wms\Domain\Entity\Deposito\Endereco;

use Doctrine\ORM\EntityRepository,
    Wms\Domain\Entity\Deposito\Endereco\Caracteristica as CaracteristicaEntity;

/**
 * Caracteristica
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */

class CaracteristicaRepository extends EntityRepository
{
    public function save(CaracteristicaEntity $caracteristicaEntity, array $values)
    {
	$em = $this->getEntityManager();
	extract($values);
	
	$caracteristicaEntity->getRegras()->clear();
	$em->persist($caracteristicaEntity);
	
	foreach ($regras['regras'] as $key => $codRegra) {
	    $regra = $em->getReference('wms:Deposito\Endereco\Regra', $codRegra);
	    $caracteristicaEntity->getRegras()->add($regra);
	}	
	
	$caracteristicaEntity->setDescricao($identificacao['descricao']);
	
	$em->persist($caracteristicaEntity);
    }

    public function remove($id)
    {
	$em = $this->getEntityManager();
	$proxy = $em->getReference('wms:Deposito\Endereco\Caracteristica', $id);
	$em->remove($proxy);
    }
    
     /**
     * Returns all contexts stored as array (only id and nome)
     * @return array
     */
    public function getIdValue()
    {
	$caracteristicas = array();
	foreach ($this->findAll() as $caracteristica)
	    $caracteristicas[$caracteristica->getId()] = $caracteristica->getDescricao();
	return $caracteristicas;
    }
}
